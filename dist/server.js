(()=>{"use strict";var e={n:r=>{var s=r&&r.__esModule?()=>r.default:()=>r;return e.d(s,{a:s}),s},d:(r,s)=>{for(var t in s)e.o(s,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:s[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),p:"/"};const r=require("react-dom/server");var s=e.n(r);const t=require("express");var n=e.n(t);const i=require("react-router-dom/server"),o=(e.p,require("react-router-dom")),l=require("react"),a=require("react/jsx-runtime"),c=()=>(0,a.jsx)("div",{className:"Red",children:"Red"}),u=()=>(0,a.jsx)("div",{className:"Blue",children:"Blue"}),d=()=>(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)(o.Link,{to:"/red",children:"Reddasdasds"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.Link,{to:"/blue",children:"Blue"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.Link,{to:"/users",children:"Users"})})]}),h=()=>(0,a.jsx)(c,{}),p=()=>(0,a.jsx)(u,{}),x=require("react-redux"),j=require("axios");var m=e.n(j);const v="users/GET_USERS_PENDING",y="users/GET_USERS_SUCCESS",f="users/GET_USERS_FAILURE",g=()=>async e=>{try{e({type:v});const r=await m().get("https:jsonplaceholder.typicode.com/users");e({type:y,payload:r})}catch(r){throw e({type:f,error:!0,payload:r}),r}},S={users:null,user:null,loading:{users:!1,user:!1},error:{users:null,user:null}},R=(0,l.createContext)(null),E=R,_=e=>{let{resolve:r}=e;const s=(0,l.useContext)(R);return s?(s.done||s.promises.push(Promise.resolve(r())),null):null},q=e=>{let{users:r}=e;return r?(0,a.jsx)("div",{children:(0,a.jsx)("ul",{children:r.map((e=>(0,a.jsx)("li",{children:(0,a.jsx)(o.Link,{to:"/users/".concat(e.id),children:e.username})},e.id)))})}):null},b=()=>{const e=(0,x.useSelector)((e=>e.users.users)),r=(0,x.useDispatch)();return(0,l.useEffect)((()=>{e||r(g())}),[r,e]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q,{users:e}),(0,a.jsx)(_,{resolve:()=>r(g)})]})},k=()=>(0,a.jsx)(b,{}),w=function(){return(0,a.jsxs)("div",{className:"App",children:[(0,a.jsx)(d,{}),(0,a.jsx)("hr",{}),(0,a.jsxs)(o.Routes,{children:[(0,a.jsx)(o.Route,{path:"/red",element:(0,a.jsx)(h,{})}),(0,a.jsx)(o.Route,{path:"/blue",element:(0,a.jsx)(p,{})}),(0,a.jsx)(o.Route,{path:"/users/*",element:(0,a.jsx)(k,{})})]})]})},P=require("path");var T=e.n(P);const N=require("fs");var O=e.n(N);const L=require("redux"),U=require("redux-thunk"),A=(0,L.combineReducers)({users:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case v:return{...e,loading:{...e.loading,users:!0}};case y:return{...e,loading:{...e.loading,users:!1},users:r.payload.data};case f:return{...e,loading:{...e.loading,users:!1},error:{...e.error,users:r.payload}};default:return e}}}),C=JSON.parse(O().readFileSync(T().resolve("./build/asset-manifest.json"),"utf8")),D=n()(),G=n().static(T().resolve("./build"),{index:!1});D.use(G),D.use((async(e,r,t)=>{const n=(0,L.createStore)(A,(0,L.applyMiddleware)(U.thunk)),o={done:!1,promises:[]},l=(0,a.jsx)(E.Provider,{value:o,children:(0,a.jsx)(x.Provider,{store:n,children:(0,a.jsx)(i.StaticRouter,{location:e.url,context:{},children:(0,a.jsx)(w,{})})})});s().renderToStaticMarkup(l);try{await Promise.all(o.promises)}catch(e){return r.status(500)}o.done=!0;const c=s().renderToString(l),u=JSON.stringify(n.getState()).replace(/</g,"\\u003c"),d="<script>__PRELOADED_STATE__ = ".concat(u,"<\/script>");r.send(function(e,r){return'<!DOCTYPE html>\n    <html leng="en">\n        <head>\n            <meta charset="utf-8"/>\n            <link rel="shortcut icon" href="/favicon.ico"/>\n            <meta\n                name="viewport"\n                content="width=device-width,initial-scale=1,shrink-to-fit=no"\n            />\n            <meta name="theme-color" content="#000000"/>\n            <title>React App</title>\n            <link href="'.concat(C.files["main.css"],'" rel="stylesheet"/>\n        </head>\n        <body>\n            <noscript>You need to enable Javascript to run this app.</noscript>\n            <div id="root">').concat(e,"</div>\n            ").concat(r,'\n            <script src="').concat(C.files["main.js"],'"><\/script>\n        </body>\n    </html>\n    ')}(c,d))})),D.listen(5e3,(()=>{console.log("Runnig on http://localhost:5000")}))})();